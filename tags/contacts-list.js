riot.tag("contacts-list",'<p class="explanation">Complete your friends informations (minimum 3 people)</p><div class="contact-list"><contact each="{contact in contactModel.contacts}" contact="{contact}"></contact></div><div class="contact-control"><div class="contact-control__cell"><i onclick="{contactModel.add}" class="badge icon icon-group"></i></div><div class="contact-control__cell { invalid: !isSendable }"><i onclick="{sendMails}" class="badge icon icon-paper"></i></div></div>',function(t){var n=this;n.isSendable=contactModel.isValid(),contactModel.on("remove",function(){n.isSendable=contactModel.isValid(),n.update()}),contactModel.on("mailsUpdated",function(){n.isSendable=contactModel.isValid(),n.update()}),contactModel.on("add",function(){n.isSendable=contactModel.isValid(),n.update()}),contactModel.on("nameUpdated",function(){n.isSendable=contactModel.isValid(),n.update()}),contactModel.on("sent",function(){this.unmount()}),this.sendMails=function(){contactModel.send().then(function(){riot.mount("result")},function(t,n){alert("server error")})}});