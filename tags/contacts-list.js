riot.tag("contacts-list",'<p class="explanation">Complete your friends informations (minimum 3 people)</p><div class="contact-list"><contact each="{contact in contactModel.contacts}" contact="{contact}"></contact></div><div class="contact-control"><div class="contact-control__cell"><i onclick="{contactModel.add}" class="badge icon icon-group"></i></div><div class="contact-control__cell { invalid: !isSendable }"><i onclick="{sendMails}" class="badge icon icon-paper"></i></div></div>',function(t){var c=this;c.isSendable=contactModel.isValid(),contactModel.on("remove",function(){c.isSendable=contactModel.isValid(),c.update()}),contactModel.on("mailsUpdated",function(){c.isSendable=contactModel.isValid(),c.update()}),contactModel.on("add",function(){c.isSendable=contactModel.isValid(),c.update()}),contactModel.on("nameUpdated",function(){c.isSendable=contactModel.isValid(),c.update()}),this.sendMails=function(){contactModel.send().then(function(){riot.mount("result"),this.unmount()},function(t,c){alert("server error")})}});